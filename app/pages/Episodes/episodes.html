<section>
  <div>
    <md-button class="md-primary md-hue-1 small-button" ui-sref="nav.series">Series</md-button>
    /
    <md-button class="md-accent small-button" ng-click="reload()">{{series_name}}</md-button>
    <md-input-container>
      <md-select class="md-no-underline" ng-model="selectedItem" md-selected-text="getSelectedText()" placeholder="Season 1">
        <md-optgroup>
          <md-option ng-value="item" ng-repeat="item in items">Season {{item}}</md-option>
        </md-optgroup>
      </md-select>
    </md-input-container>
  </div>

  <div layout="row">
    <md-button layout="column" class="md-raised md-accent" ng-show="isEditable && checkIfOwner()" ui-sref="episodes_create">Create New Episode</md-button>
  </div>

  <md-progress-linear md-mode="indeterminate" ng-show="isLoading"></md-progress-linear>
  <div class="scrollable" ng-style="{height: hgt+ 'px'}">
    <md-list ng-repeat="item in seasons track by $index" class="no-padding">
      <md-subheader id="season_{{item.season}}" class="md-no-sticky">Season {{item.season}}</md-subheader>
      <md-divider></md-divider>
      <md-list-item class="md-3-line" ng-repeat="episode in item.episodes track by $index" ng-click="openDialog(this, episode)">
        <div flex class="md-list-item-text series-box">
          <div class="series-row">
            <div class="series-item">
              <h3>{{episode.name}}</h3>
            </div>
            <div class="rcorners1 corner-orange" ng-show="episode.is_watched != 'T' && episode.claimed_by_user != 0">Claimed by {{episode.assigned_name}}</div>
            <div class="rcorners1 corner-blue" ng-show="episode.is_watched == 'T'">Watched</div>
          </div>
          <div>
            <h4>Season {{ item.season }}, Episode {{ episode.episode }}</h4>
          </div>
          <div>
            <p ng-show="episode.description != 0">{{ episode.description }}</p>
          </div>
        </div>
        <div flex="20" ng-if="isEditable && checkIfOwner()">
          <md-button class="md-fab md-accent fab-top-offset" ng-click="loadEpisodesEdit(item.season, episode)">
            <md-icon class="material-icons">build</md-icon>
          </md-button>
        </div>
        <md-divider md-inset></md-divider>
      </md-list-item>
    </md-list>
  </div>
  </md-list-item>
  </md-list>
  <md-list-item ng-show="!(seasons.length > 0)" class="md-3-line">
    <span>
      <p>No episodes here.</p>
    </span>
  </md-list-item>
  </div>

  <md-button class="md-fab md-primary fab-offset" ng-show="checkIfOwner()" ng-click="isEditable = !isEditable">
    <md-icon class="material-icons" ng-show="isEditable">create</md-icon>
    <md-icon class="material-icons" ng-show="!isEditable">visibility</md-icon>
  </md-button>
</section>